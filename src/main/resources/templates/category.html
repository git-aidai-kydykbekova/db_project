<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Category Management</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
<div class="container">
    <h1>Category Management</h1>

    <div class="form-group">
        <label for="categoryName">Category Name</label>
        <input type="text" class="form-control" id="categoryName" placeholder="Enter category name">
        <button id="getCategoryByName" class="btn btn-primary mt-2">Get Category By Name</button>
    </div>

    <div class="form-group">
        <button id="getAllCategories" class="btn btn-primary mt-2">Get All Categories</button>
    </div>

    <div class="form-group">
        <label for="newCategoryName">New Category Name</label>
        <input type="text" class="form-control" id="newCategoryName" placeholder="Enter new category name">
        <button id="createCategory" class="btn btn-success mt-2">Create Category</button>
    </div>

    <div class="form-group">
        <label for="updateCategoryName">Update Category Name</label>
        <input type="text" class="form-control" id="updateCategoryName" placeholder="Enter updated category name">
        <button id="updateCategory" class="btn btn-warning mt-2">Update Category</button>
    </div>

    <div id="result" class="mt-4"></div>
</div>

<script>
    $(document).ready(function() {
        $('#getCategoryByName').click(function() {
            let categoryName = $('#categoryName').val();
            $.get(`/category/get-category-by-name/${categoryName}`, function(data) {
                $('#result').html(`<div class="alert alert-info">${JSON.stringify(data)}</div>`);
            }).fail(function(response) {
                $('#result').html(`<div class="alert alert-danger">Failed to get Category: ${response.responseJSON.message}</div>`);
            });
        });

        $('#getAllCategories').click(function() {
            $.get(`/category/get-all-category`, function(data) {
                $('#result').html(`<div class="alert alert-info">${JSON.stringify(data)}</div>`);
            }).fail(function(response) {
                $('#result').html(`<div class="alert alert-danger">Failed to get all Categories: ${response.responseJSON.message}</div>`);
            });
        });

        $('#createCategory').click(function() {
            let categoryName = $('#newCategoryName').val();
            $.ajax({
                url: '/category/create-category',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ name: categoryName }),
                success: function(data) {
                    $('#result').html(`<div class="alert alert-success">${data.message}</div>`);
                },
                error: function(response) {
                    $('#result').html(`<div class="alert alert-danger">Failed to create Category: ${response.responseJSON.message}</div>`);
                }
            });
        });

        $('#updateCategory').click(function() {
            let categoryName = $('#updateCategoryName').val();
            $.ajax({
                url: '/category/update-category',
                type: 'PUT',
                contentType: 'application/json',
                data: JSON.stringify({ name: categoryName }),
                success: function(data) {
                    $('#result').html(`<div class="alert alert-success">${data.message}</div>`);
                },
                error: function(response) {
                    $('#result').html(`<div class="alert alert-danger">Failed to update Category: ${response.responseJSON.message}</div>`);
                }
            });
        });
    });
</script>
</body>
</html>
